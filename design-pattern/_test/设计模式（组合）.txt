简介：
将对象组合成树形结构以表示“部分-整体”的层次结构，组合模式使得用户对单个对象和组合对象的使用具有一致性。
组合模式是一种专门为web上的动态用户界面量身定制的模式，使用这种模式，可以用一条命令在多个对象上激发复杂
的或者递归行为。组合模式可以用同样的方法处理对象的集合和其中特定的子对象，组合对象与组成他的对象实现了
同一批操作。对组合对象执行的这些操作将向下传递到所有的组成对象（在享元模式的日历案例中display方法即是如
此），这样一来所有的组成对象将会执行相同的操作。这种模式可以用来把一批子对象组织成树形结构，并且使整棵树
都可以遍历。组合对象的层次体系中有两种类型的对象：叶对象和组合对象。这是一个递归定义，这正是组合模式如此
有用的原因何在。一个组合对象由一些别的组合对象和叶子对象组成。其中叶子对象不再包含子对象，叶子对象是组合
对象中最基本的元素，也是各具体操作的落地点。按照定义实现的代码见section1

使用场景：
存在一批组织成某种层次体系结构的对象并需要对其进行同一中类型操作（日历，表单验证），组合模式擅长于对大批
对象进行操作，它专门为组织这类对象并把操作从一个层次向下一个层次传递而设计。

代码示例：
//section1:
(function(){
	function Component(){
		this.childComponents = [];
	}
	Component.prototype = {
		someOperation: function(){},
		addChild: function(){
			throw new Error('object does\'t support this method: addChild');
		},
		removeChild: function(){},
		getChild: function(){}
	};
	
	//组合对象
	function Composite(){
		Component.call(this);
	}
	extend(Composite,Component);
	Composite.prototype.someOperation = function(){
		for(var i=0,len=this.childComponents.length; i<len; i++){
			this.childComponents[i].someOperation();
		}
	};
	Composite.prototype.addChild = function(child){
		this.childComponents.push(child);
	};
	Composite.prototype.removeChild = function(child){
		var item;
		for(var i=0,len=this.childComponents.length; i<len; i++){
			item = this.childComponents[i];
			if(item == child){
				return true;
			}
		}
		return;
	};
	Composite.prototype.getChild = function(index){
		if(index >=0 && index < this.childComponents.length){
			return this.childComponents[index];
		}
		return null;
	};
	
	//叶子对象
	function Leaf(){
		Component.call(this);
	}
	extend(Leaf,Component);
	leaf.prototype.someOperation = function(){
		//覆盖自定义，这里是具体的操作落地点
	};
	
	var root = new Composite(),
		a = new Leaf(),
		b = new Leaf();
	root.addChild(a);
	root.addChild(b);
	root.someOperation();
	
})();


//section2:(父组件引用、删除某一层级、打印组合层次结构)
(function(){
	function Component(){
		this.parent = null;
	}
	Component.prototype = {
		getChildren: function(){
			throw new Error('object does\'t support this method');
		},
		addChild: function(){},
		removeChild: function(){},
		getChild: function(){}
	};
	
	function Composite(name){
		this.childComponents = [];
		this.name = name;
	}
	extend(Composite,Component);
	Composite.prototype.addChild = function(child){
		this.childComponents.push(child);
		child.parent = this;
	};
	Composite.prototype.removeChild = function(child){
		var idx = this.childComponents.indexOf(child);
		if(idx !== -1){
			for(var i=0,len=child.childComponents.length; i<len; i++){
				var item = child.getChildren()[i];
				item.parent = this;
				this.childComponents.push(item);
			}
			this.childComponents.splice(idx,1);
		}
	};
	Composite.prototype.getChildren = function(){
		return this.childComponents;
	};
	Composite.prototype.printStruct = function(preStr){
		console.log('preStr：' + this.name + '\n');
		for(var i=1,len=this.childComponents.length; i<len; i++){
			var item = this.childComponents[i];
			item.printStruct(preStr);
		}
	};
	
	function Leaf(name){
		this.name = name;
	}
	extend(Leaf,Composite);
	Leaf.prototype.printStruct = function(preStr){
		console.log(preStr + '-' + this.name);
	};
	
	var root = new Composite('服装')，
		c1 = new Composite('男装'),
		c2 = new Composite('女装'),
		leaf1 = new Leaf('衬衣'),
		leaf2 = new Leaf('裙子');
	root.addChild(c1);
	root.addChild(c2);
	c1.addChild(leaf1);
	c2.addChild(leaf2);
	root.removeChild(c1);
	root.printStruct();
})();


//section3:
var CompositeForm = function(id,method,action){
	this.formComponents = [];
	this.element = document.createElement('form');
	this.element.id = id;
	this.element.method = method || 'POST';
	this.element.action = action;
};
CompositeForm.prototype.add = function(child){
	this.formComponents.push(child);
	this.element.appendChild(child.getElement());
};
CompositeForm.prototype.remove = function(child){
	for(var i=0,len=this.formComponents.length; i<len; i++){
		if(this.formComponents[i] == child){
			this.formComponents.splice(i,1);
			break;
		}
	}
};
CompositeForm.prototype.getChild = function(index){
	return this.formComponents[index];
};
Composite.prototype.save = function(){
	for(var i=0,len=this.formComponents.length; i<len; i++){
		this.formComponents[i].save();
	}
};
Composite.prototype.getElement = function(){
	return this.element;
};

//Field叶子对象抽象类
var Field = function(id){
	this.id = id;
};
Field.prototype.add = function(){};
Filed.prototype.remove = function(){};
Field.prototype.getChild = function(){};
Field.prototype.save = function(){
	setCookie(this.id,this.getValue());
};
Field.protype.getElement = function(){
	return this.element;
};
Field.prototype.getValue = function(){};

//叶子对象类
var InputField = function(id,label){
	Field.call(this);
	this.input = document.createElement('input');
	this.input.id = id;
	this.input.type = 'text';
	this.label = document.createElement('label');
	this.label.setAttribute('for',id);
	var labelTextNode = document.createTextNode(label);
	this.label.appendChild(labelTextNode);
	
	this.element = document.createElement('div');
	this.element.className = 'input-field';
	this.element.appendChild(this.label);
	this.element.appendChild(this.input);
};
extend(InputField,Field);
InputField.prototype.getValue = function(){
	return this.input.value;
};

var SelectField = function(id,label,options){
	Field.call(this);
	this.select = document.createElement('select');
	this.select.id = id;
	this.label = document.createElement('label');
	this.label.setAttribute('for', id);
	var labelTextNode = document.createTextNode(label);
	this.label.appendChild(labelTextNode); 
	this.element = document.createElement('div');
	this.element.className = 'select-field';
	this.element.appendChild(this.label);
	this.element.appendChild(this.select);
};
extend(SelectField,Field);
SelectField.prototype.getValue = function(){
	return this.select.options[this.select.selectedIndex].value;
};






